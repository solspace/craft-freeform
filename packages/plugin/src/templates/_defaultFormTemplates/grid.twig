{% css formCss %}

{{ form.renderTag({
    attributes: {
        row: { class: "freeform-row" },
        errors: { class: "freeform-form-has-errors" },
    },
}) }}

<script>
  var form = document.querySelector('[data-id="{{ form.anchor }}"]');
  if (form) {
    form.addEventListener("freeform-stripe-styling", function (event) {
      event.detail.base = {
        fontSize: "16px",
        fontFamily: "-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"",
      }
    })
  }
</script>

{% if form.pages|length > 1 %}
    <ul class="freeform-pages">
        {% for page in form.pages %}
            <li>
                {% if form.currentPage.index == page.index %}
                    <b>{{ page.label }}</b>
                {% else %}
                    {{ page.label }}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if form.hasErrors %}
    <div{{ form.attributes.errors }}>
        {{ form.errorMessage | t('freeform') }}

        {% if form.errors|length %}
            <ul>
                {% for error in form.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endif %}

{% for row in form.rows %}
    {% set width = (12 / (row|length)) %}

    <div{{ form.attributes.row }}>

        {% for cell in row %}

            {% set field = cell.field %}
            {% do field.setParameters({
                attributes: {
                    container: { class: [
                        "freeform-column",
                        "freeform-column-" ~ width,
                        "ff-fieldtype-" ~ field.type,
                    ]},
                    input: { class: [
                        field.type != "signature" ? "freeform-input",
                    ]},
                    label: { class: [
                        "freeform-label",
                        field.inputOnly ? "freeform-input-only-label",
                        field.required ? "freeform-required",
                    ]},
                    errors: { class: "freeform-errors" },
                },
            }) %}

            {{ field.render }}

        {% endfor %}
    </div>
{% endfor %}

{{ form.renderClosingTag }}
