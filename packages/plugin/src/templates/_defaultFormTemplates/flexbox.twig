{% css formCss %}

{% macro render(row, form) %}
    {% import _self as self %}

    {% set width = (12 / (row|length)) %}

    <div{{ form.attributes.row }}>
        {% for cell in row %}
            {% set field = cell.field %}

            {{ field.render({
                attributes: {
                    container: { class: [
                        "freeform-column",
                        "ff-fieldtype-" ~ field.type,
                    ]},
                    input: { class: field.type not in ["save", "signature"] ? "freeform-input" },
                    label: { class: [
                        "freeform-label",
                        field.inputOnly ? "freeform-input-only-label",
                        field.required ? "freeform-required",
                    ]},
                    errors: { class: "freeform-errors" },
                    instructions: { class: "freeform-instructions" },
                }
            }) }}
        {% endfor %}
    </div>

{% endmacro %}


{{ form.renderTag({
    attributes: {
        row: { class: "freeform-row" },
        errors: { class: "freeform-form-has-errors" },
    }
}) }}

<script>
  var form = document.querySelector('[data-id="{{ form.anchor }}"]');
  if (form) {
    form.addEventListener("freeform-stripe-styling", function (event) {
      event.detail.base = {
        fontSize: "16px",
        fontFamily: "-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"",
      }
    })
  }
</script>

{% if form.pages|length > 1 %}
    <ul class="freeform-pages">
        {% for page in form.pages %}
            <li>
                {% if form.currentPage.index == page.index %}
                    <b>{{ page.label }}</b>
                {% else %}
                    {{ page.label }}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if not form.ajaxEnabled and form.submittedSuccessfully %}
    <div class="freeform-alert freeform-alert-success">
        {{ form.successMessage | t('freeform') }}
    </div>
{% endif %}

{% if form.hasErrors %}
    <div{{ form.attributes.error }}>
        {{ form.errorMessage | t('freeform') }}

        {% if form.errors|length %}
            <ul>
                {% for error in form.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endif %}

{% for row in form.rows %}
    {{ _self.render(row, form) }}
{% endfor %}

{{ form.renderClosingTag }}
