{% macro getFieldTemplate(type) -%}
    {% set fieldTemplatePath = "freeform/_defaultFormTemplates/tailwind-3/fields/" %}
    {{- fieldTemplatePath ~ type ~ ".twig" -}}
{%- endmacro %}

{% macro render(rows, form) %}
    {% import _self as self %}

    {% for row in rows %}

        {% set columnCount = row|length %}

        <div{{ form.attributes.row }}>
            {% for field in row %}

                {% do field.setParameters({
                    attributes: {
                        container: {
                            class: [
                                "w-full px-2",
                                field.type not in ["group"] ? "md:mb-0 mb-4",
                                columnCount in [2, 3, 4] ? "md:w-1/" ~ columnCount,
                                columnCount in [2, 3, 4] ? "lg:w-1/" ~ columnCount,
                                columnCount in [2, 3, 4] ? "xl:w-1/" ~ columnCount,
                                columnCount == 1 ? "md:w-full lg:w-full xl:w-full"
                            ],
                        },
                        input: {
                            novalidate: true,
                            class: [
                                "text-slate-800 rounded py-2 px-3 leading-tight",
                                "placeholder:font-light placeholder:text-slate-400",
                                "border border-slate-400 focus:outline-none focus:bg-white focus:border-blue-600",
                                field.type not in ["checkbox", "checkboxes", "radios", "opinion-scale", "signature", "table"] ? "appearance-none block w-full",
                                field.hasErrors ? "border-red-500",
                            ]
                        },
                        label: { class: [
                            field.type not in ["checkbox"] ? "block text-slate-800 text-base font-medium mb-1",
                            field.inputOnly ? "freeform-input-only-label",
                            field.required ? "required",
                        ]},
                        instructions: { class: [
                            "block text-slate-500 text-sm -mt-1.5 mb-1"
                        ] },
                        error: { class: "freeform-errors" },
                    }
                }) %}

                {% include [self.getFieldTemplate(field.type), self.getFieldTemplate("_default")] %}

            {% endfor %}
        </div>

    {% endfor %}

{% endmacro %}