{% extends "demo/_layout" %}

{% set pageTitle = "Extras" %}
{% set page = "extras" %}

{# Replace 'freeformSuccessSamePage' with your form handle #}
{% set form = craft.freeform.form("freeformSuccessSamePage") %}

{% block content %}

<div class="container">

    <h2>Returning Success to Same Page</h2>
    <p>The following example shows how to have a successful submit return to the same page with a success query in the URL. There are other ways to do this, including using AJAX.</p>
    <hr />

    {% if form %}

        <h3 class="mb-3">{{ form.name }}</h3>
    
        {# Detect the query in the URI and display success message #}
        {% if craft.app.request.getQueryParam('success') == 1 %}
            <div class="alert alert-success" role="alert">
                <h4 class="alert-heading mb-1">Thank you!</h4>
                <p class="mb-0">Your submission was successful!</p>
            </div>
        {% endif %}

        {{ form.render({
            returnUrl: "demo/extras/success-same-page/?success=1",
        }) }}

    {% else %}

    {# Show instructions to developer if they wish to see this page work correctly #}

        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading mb-3">You can't see this page correctly until...</h4>
            <p>
                In order to view this page live, you'll need to make some adjustments to this template or on your test from:
                <ol class="mb-0">
                    <li>Rename your test form handle to <code>freeformSuccessSamePage</code> or adjust the form handle name inside this template to match your test form.</li>
                    <li>Be sure to disable the <b>Enable AJAX</b> setting inside the form builder for this form.</li>
                </ol>
            </p>
        </div>
    
    {% endif %}

</div>

{% endblock %}